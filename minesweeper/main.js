(()=>{"use strict";var e={705:e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t="",a=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),a&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),a&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t})).join("")},n.i=function(e,t,a,r,o){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(a)for(var c=0;c<this.length;c++){var l=this[c][0];null!=l&&(i[l]=!0)}for(var d=0;d<e.length;d++){var s=[].concat(e[d]);a&&i[s[0]]||(void 0!==o&&(void 0===s[5]||(s[1]="@layer".concat(s[5].length>0?" ".concat(s[5]):""," {").concat(s[1],"}")),s[5]=o),t&&(s[2]?(s[1]="@media ".concat(s[2]," {").concat(s[1],"}"),s[2]=t):s[2]=t),r&&(s[4]?(s[1]="@supports (".concat(s[4],") {").concat(s[1],"}"),s[4]=r):s[4]="".concat(r)),n.push(s))}},n}},742:e=>{e.exports=function(e,n){return n||(n={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),n.hash&&(e+=n.hash),/["'() \t\n]|(%20)/.test(e)||n.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},738:e=>{e.exports=function(e){return e[1]}},426:(e,n,t)=>{t.d(n,{Z:()=>S});var a=t(738),r=t.n(a),o=t(705),i=t.n(o),c=t(742),l=t.n(c),d=new URL(t(685),t.b),s=new URL(t(713),t.b),u=new URL(t(661),t.b),p=new URL(t(626),t.b),m=new URL(t(859),t.b),g=new URL(t(723),t.b),h=new URL(t(464),t.b),f=new URL(t(49),t.b),b=i()(r()),v=l()(d),x=l()(s),y=l()(u),k=l()(p),L=l()(m),C=l()(g),w=l()(h),E=l()(f);b.push([e.id,"\nbody {\n  font-family: 'Chakra Petch', sans-serif;\n  max-width: 100%;\n  margin: 0;\n  padding: 0;\n}\n\nmain {\nmargin: 0;\n}\n\n.main-title {\n    display: block;\n    text-align: center;\n}\n\n.dark-mode {\n    filter: invert(90%);\n    background-color: rgba(0, 0, 0, 0.85);\n}\n\n.wrapper {\n  margin: auto;\n  max-width: 100%;\n  text-align: center;\n}\n\n.popup-background {\n    margin: 0;\n    top: 0;\n    position: absolute;\n    z-index: 2;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background-color: rgba(0, 0, 0, 0.1);\n}\n\n.popup-msg {\n  width: 450px;\n  height: 220px;\n  text-align: center;\n  border: 1px dashed black;\n  background-image: url("+v+");\n  background-size: 20%;\n  background-repeat: no-repeat;\n  background-position:center bottom 15%;\n  background-color: white\n}\n\n.hidden {\n    display: none;\n}\n\n.gameover {\ncolor: red;\n}\n\n.win {\ncolor: green;\n}\n\n.game {\n  width: fit-content;\n  min-width: 40%;\n  margin: auto;\n  border: 1px dashed black;\n}\n\n.game-head,\n.game-setup,\n.game-field,\n.statistics {\n  min-height: 30px;\n  display: flex;\n  justify-content: space-between;\n    align-items: center;\n    border-bottom: 1px dashed black;\n    padding: 15px 5%;\n}\n\n.mines-num,\n.timer {\n  box-sizing: border-box;\n  display: flex;\n  justify-content: space-evenly;\n  align-items: center;\n  border: 1px dashed black;\n  width: 50px;\n  height: 25px;\n  color:coral;\n  font-family: 'Chakra Petch', sans-serif;\n  font-size: 16px;\n  text-align: center;\n  padding: 0;\n  font-weight: 700;\n  background-color: transparent;\n}\n\n\n.mines-num-div::before {\n    padding-right: 5px;\n    content: '';\n    background-image: url("+v+");\n    background-repeat: no-repeat;\n    background-size: 20px 20px;\n    background-position: center;\n    width: 25px;\n    height: 25px;\n    float: left;\n}\n\n.timer-div {\n    display: flex;\n}\n.timer-div::after {\n    padding-left: 5px;\n    content: '';\n    background-image: url("+x+");\n    background-repeat: no-repeat;\n    background-size: 20px 20px;\n    background-position: center;\n    width: 25px;\n    height: 25px;\n    float: right;\n}\n\n.choose-size {\n    cursor: pointer;\n    background-color: transparent;\n    border: 1px dashed black;\n    width: 75px;\n    height: 25px;\n    font-family: 'Chakra Petch', sans-serif;\n}\n\n.changed {\n    background-color: rgba(0, 0, 0, 0.2);\n}\n\n.new-game-btn {\n    cursor: pointer;\n    border: none;\n    background-image: url("+y+");\n    background-size: 30px;\n    width: 30px;\n    height: 30px;\n    background-repeat: no-repeat;\n    background-color: transparent;\n    transition: all 0.15s ease-in-out;\n}\n\n.new-game-btn:hover,\n.sound-btn:hover,\n.theme-btn:hover {\n    filter: invert(76%) sepia(36%) saturate(7494%) hue-rotate(333deg) brightness(108%) contrast(102%);\n}\n\n.sound-btn {\n    cursor: pointer;\n    border: none;\n    background-image: url("+k+");\n    background-size: 30px;\n    width: 30px;\n    height: 30px;\n    background-repeat: no-repeat;\n    background-color: transparent;\n    transition: all 0.15s ease-in-out;\n}\n\n.theme-btn {\n    cursor: pointer;\n    border: none;\n    background-image: url("+L+");\n    background-size: 30px;\n    width: 30px;\n    height: 30px;\n    background-repeat: no-repeat;\n    background-color: transparent;\n    transition: all 0.15s ease-in-out;\n    margin-left: 16px;\n}\n\n.sound-on {\n    background-image: url("+C+");\n}\n\n.game-field {\n    box-sizing: border-box;\n    position: relative;\n    justify-content: center;\n    padding: 60px 20px;\n}\n\n.flag-count {\n    z-index: 1;\n    position: absolute;\n    top: 15px;\n    left: 5%;\n    font-size: 10px;\n}\n\n.clicks-count {\n    z-index: 1;\n    position: absolute;\n    top: 30px;\n    left: 5%;\n    font-size: 10px;\n}\n\n\n.flag-btn {\n    cursor: pointer;\n    z-index: 1;\n    position: absolute;\n    top: 15px;\n    right: 5%;\n    background-image: url("+w+");\n    background-size: 20px;\n    background-position: center;\n    background-repeat: no-repeat;\n    width: 25px;\n    height: 25px;\n    background-color: transparent;\n    border: 1px dashed black;\n}\n\n.flag-btn:hover {\n  border-color: red;\n}\n\n.flag-active {\n    background-color: rgba(0, 0, 0, 0.2) ;\n}\n\n\n.cell-container {\n  display:grid;\n  gap: 2.5px;\n}\n\n.easy {\n  grid-template-columns: repeat(10, 1fr);    \n}\n\n.medium {\n    grid-template-columns: repeat(15, 1fr);\n}\n\n.hard {\n    grid-template-columns: repeat(25, 1fr);\n}\n\n\n.cell {\n    cursor: pointer;\n    width: 20px;\n    height: 20px;\n    background-color: rgba(0, 0, 0, 0.25);\n}\n.cell-open {\n    background-color: rgba(0, 0, 0, 0.1);\n}\n\n.cell-flag,\n.cell-bomb {\n    background-size: 18px;\n    background-repeat: no-repeat;\n    background-position: center;\n}\n\n.cell-bomb {\n    background-image: url("+v+");\n    filter: invert(100%);\n    background-size: 15px;\n    background-color: aqua;\n}\n\n.cell-flag {\n    background-image: url("+E+");\n}\n\n.cell-1 {\n    color: blue;\n}\n.cell-2 {\n    color: green;\n} \n.cell-3 {\n    color: red;\n}\n.cell-4 {\n    color: blueviolet;\n}\n\n.cell-5 {\n    color: orange;\n}\n\n.cell-6 {\n    color: aqua;\n}\n\n.cell-7 {\n    color: chartreuse;\n}\n\n.cell-8 {\n    color: yellow;\n}\n\n.cell-9 {\n    color: pink;\n}\n\n\n.statistics-div {\n    padding-bottom: 15px;\n    display: flex;\n    flex-direction: column;\n}\n\n.stat-title {\n    margin-bottom: 0;\n}\n\n.hist-title {\n    width: 55px;\n    margin-top: 10px;\n    margin-bottom: 5px;\n    vertical-align: top;\n    /* text-align: left; */\n}\n\n.statistics {\n    padding: 0 5%;\n    border-bottom: none;\n    display: flex;\n    font-size: 12px;\n}\n\n.date-hist-title {\n    width: 100px\n}\n\n.hist{\n    width: 55px;\n}\n\n/* .history-time,\n.time-hist-title {\n    position: absolute;\n    margin: auto;\n    left: 0;\n    right: 0;\n} */\n\n\n@media (max-width: 1280px) {\n  .game {\n    min-width: 60%;\n  /* max-width: 80%; */\n  }\n}\n\n@media (max-width: 768px) {\n    .game {\n        min-width: 80%;\n    /* max-width: 95%; */\n    }\n\n    .cell-container {\n        gap: 1.5px;\n      }\n\n      .cell {\n          width: 16px;\n          height: 16px;\n          font-size: 12.5px;\n      }\n\n      .flag-btn {\n        width: 30px;\n        height: 30px;\n\n      }\n  }\n\n",""]);const S=b},379:e=>{var n=[];function t(e){for(var t=-1,a=0;a<n.length;a++)if(n[a].identifier===e){t=a;break}return t}function a(e,a){for(var o={},i=[],c=0;c<e.length;c++){var l=e[c],d=a.base?l[0]+a.base:l[0],s=o[d]||0,u="".concat(d," ").concat(s);o[d]=s+1;var p=t(u),m={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)n[p].references++,n[p].updater(m);else{var g=r(m,a);a.byIndex=c,n.splice(c,0,{identifier:u,updater:g,references:1})}i.push(u)}return i}function r(e,n){var t=n.domAPI(n);return t.update(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,r){var o=a(e=e||[],r=r||{});return function(e){e=e||[];for(var i=0;i<o.length;i++){var c=t(o[i]);n[c].references--}for(var l=a(e,r),d=0;d<o.length;d++){var s=t(o[d]);0===n[s].references&&(n[s].updater(),n.splice(s,1))}o=l}}},569:e=>{var n={};e.exports=function(e,t){var a=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}},216:e=>{e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},565:(e,n,t)=>{e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var a="";t.supports&&(a+="@supports (".concat(t.supports,") {")),t.media&&(a+="@media ".concat(t.media," {"));var r=void 0!==t.layer;r&&(a+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),a+=t.css,r&&(a+="}"),t.media&&(a+="}"),t.supports&&(a+="}");var o=t.sourceMap;o&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),n.styleTagTransform(a,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}},589:e=>{e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}},685:(e,n,t)=>{e.exports=t.p+"c83ddeecc594d5d71d33.png"},49:(e,n,t)=>{e.exports=t.p+"82b4cdd0de6670d6937c.png"},464:(e,n,t)=>{e.exports=t.p+"4be809ed7c833ed960a2.png"},859:(e,n,t)=>{e.exports=t.p+"99ac992208b5fe3e189e.png"},626:(e,n,t)=>{e.exports=t.p+"7cd5e374a5d347f793e9.png"},723:(e,n,t)=>{e.exports=t.p+"622f7b7bbfc591d1e4f0.png"},713:(e,n,t)=>{e.exports=t.p+"123dbeeb17bf553429da.png"},661:(e,n,t)=>{e.exports=t.p+"79e5462c647e6b4d3b67.svg"}},n={};function t(a){var r=n[a];if(void 0!==r)return r.exports;var o=n[a]={id:a,exports:{}};return e[a](o,o.exports,t),o.exports}t.m=e,t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var a in n)t.o(n,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:n[a]})},t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var a=n.getElementsByTagName("script");if(a.length)for(var r=a.length-1;r>-1&&!e;)e=a[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})(),t.b=document.baseURI||self.location.href,t.nc=void 0,(()=>{var e,n,a,r,o,i,c,l,d,s,u,p,m,g,h,f,b,v,x,y,k,L,C,w,E,S,A,q,M,z,O,T,N,R,I,U,j,P,H,F,Z,D,$=t(379),_=t.n($),Y=t(795),B=t.n(Y),G=t(569),J=t.n(G),Q=t(565),V=t.n(Q),K=t(216),W=t.n(K),X=t(589),ee=t.n(X),ne=t(426),te={};function ae(e){C.textContent="Flags put: 0 / Mines left: ".concat(e.minesCount),w.textContent="Cell clicks: 0",E.innerHTML="",E.classList.remove("easy","medium","hard");var n=0;switch(e.difficulty){case"10":n=100,E.classList.add("easy");break;case"15":n=225,E.classList.add("medium");break;case"25":n=625,E.classList.add("hard")}for(var t=1;t<=n;t++){var a=document.createElement("div");a.classList.add("cell"),E.appendChild(a)}}function re(e,n){for(var t=[],a=0;a<n;a+=1){var r=[];r.length=n,t.push(r)}e.matrix=t}function oe(e,n,t,a){var r=a*e.length+t;n[r].classList.contains("cell-open")||n[r].classList.contains("cell-flag")||(e[a][t]&&"b"!==e[a][t]?(n[r].classList.add("cell-open","cell-".concat(e[a][t])),n[r].textContent=e[a][t]):e[a][t]||(n[r].classList.add("cell-open"),t>0&&a>0&&t<e.length-1&&a<e.length-1?(oe(e,n,t-1,a),oe(e,n,t,a-1),oe(e,n,t-1,a-1),oe(e,n,t+1,a),oe(e,n,t,a+1),oe(e,n,t+1,a+1),oe(e,n,t-1,a+1),oe(e,n,t+1,a-1)):0===t&&a>0&&a<e.length-1?(oe(e,n,t,a-1),oe(e,n,t+1,a),oe(e,n,t,a+1),oe(e,n,t+1,a+1),oe(e,n,t+1,a-1)):t===e.length-1&&a>0&&a<e.length-1?(oe(e,n,t-1,a),oe(e,n,t,a-1),oe(e,n,t-1,a-1),oe(e,n,t,a+1),oe(e,n,t-1,a+1)):0===a&&t>0&&t<e.length-1?(oe(e,n,t-1,a),oe(e,n,t+1,a),oe(e,n,t,a+1),oe(e,n,t+1,a+1),oe(e,n,t-1,a+1)):a===e.length-1&&t>0&&t<e.length-1?(oe(e,n,t-1,a),oe(e,n,t,a-1),oe(e,n,t-1,a-1),oe(e,n,t+1,a),oe(e,n,t+1,a-1)):0===t&&0===a?(oe(e,n,t+1,a),oe(e,n,t,a+1),oe(e,n,t+1,a+1)):0===t&&a===e.length-1?(oe(e,n,t,a-1),oe(e,n,t+1,a),oe(e,n,t+1,a-1)):t===e.length-1&&0===a?(oe(e,n,t-1,a),oe(e,n,t,a+1),oe(e,n,t-1,a+1)):t===e.length-1&&a===e.length-1&&(oe(e,n,t-1,a),oe(e,n,t,a-1),oe(e,n,t-1,a-1))))}function ie(e,n,t,a){var r=n%t.length,o=(n-r)/t.length,i=e.currentTarget;return i.classList.contains("cell-flag")?null:"b"===t[o][r]?(i.classList.add("cell-bomb"),"gameover"):(oe(t,a,r,o),!0)}function ce(e,n,t){e.currentTarget.classList.contains("cell-open")||e.currentTarget.classList.toggle("cell-flag");var a=document.querySelector(".flag-count"),r=document.querySelectorAll(".cell-flag");a.textContent="Flags put: ".concat(r.length," / Mines left: ").concat(t-r.length)}function le(e,n,t){for(var a=t-1;a<=t+1;a+=1)a>=0&&a<e.length&&(!e[a][n+1]&&n<e[t].length-1?e[a].splice(n+1,1,1):"b"!==e[a][n+1]&&n<e[t].length-1&&e[a].splice(n+1,1,e[a][n+1]+1),e[a][n]?"b"!==e[a][n]&&e[a].splice(n,1,e[a][n]+1):e[a].splice(n,1,1),!e[a][n-1]&&n>=1?e[a].splice(n-1,1,1):"b"!==e[a][n-1]&&n>=1&&e[a].splice(n-1,1,e[a][n-1]+1))}function de(e){var n=document.querySelector(".timer");if(!e){clearInterval(H);var t=60*Z+F;return n.textContent="0:00",t}F=0,Z=0,H=setInterval((function(){(F+=1)>=60&&(F=0,Z+=1),D=F.toString().padStart(2,"0"),n.textContent="".concat(Z,":").concat(D)}),1e3)}te.styleTagTransform=ee(),te.setAttributes=V(),te.insert=J().bind(null,"head"),te.domAPI=B(),te.insertStyleElement=W(),_()(ne.Z,te),ne.Z&&ne.Z.locals&&ne.Z.locals;var se=new Audio;se.src="mixkit-game-flute-bonus-2313.wav";var ue=new Audio;ue.src="mixkit-negative-guitar-tone-2324.wav";var pe=new Audio;pe.src="mixkit-flute-alert-2307.wav";var me,ge=new Audio;function he(e,n){if(n)switch(e){case"win":se.play();break;case"lose":ue.play();break;case"open":pe.play();break;case"flag":ge.play()}}ge.src="mixkit-game-ball-tap-2073.wav";var fe={difficulty:"10",minesCount:10,darkMode:!1,flagMode:!1,clicksNum:0,cells:"",cellsArr:[],minesArr:[],matrix:[],soundOn:!1,timer:{sec:0,min:0,timeOn:!1}};!function(){e=document.createElement("main"),(n=document.createElement("div")).classList.add("wrapper"),e.appendChild(n),(a=document.createElement("h1")).classList.add("main-title"),a.textContent="Minesweeper game",n.appendChild(a),(r=document.createElement("h3")).textContent="RightClick to put a flag",n.appendChild(r),(o=document.createElement("div")).classList.add("game"),n.appendChild(o),(j=document.createElement("div")).classList.add("popup-background","hidden"),e.appendChild(j),(U=document.createElement("div")).classList.add("popup-msg"),j.appendChild(U);var t=document.createElement("h3");t.classList.add("popup-title"),U.appendChild(t),t.textContent="Hooray!";var H=document.createElement("p");H.classList.add("popup-text"),U.appendChild(H),H.textContent="You found all mines in ## seconds and N moves!",(i=document.createElement("div")).classList.add("game-setup"),o.appendChild(i),s=document.createElement("div"),i.appendChild(s),(u=document.createElement("button")).classList.add("sound-btn"),s.appendChild(u),(p=document.createElement("button")).classList.add("theme-btn"),s.appendChild(p),(m=document.createElement("select")).classList.add("choose-size"),i.appendChild(m),(g=document.createElement("option")).value=10,g.textContent="easy",m.appendChild(g),(h=document.createElement("option")).value=15,h.textContent="medium",m.appendChild(h),(f=document.createElement("option")).value=25,f.textContent="hard",m.appendChild(f),(c=document.createElement("div")).classList.add("game-head"),o.appendChild(c),(b=document.createElement("div")).classList.add("timer-div"),c.appendChild(b),(v=document.createElement("span")).classList.add("timer"),v.textContent="0:00",b.appendChild(v),(x=document.createElement("button")).classList.add("new-game-btn"),c.appendChild(x),(y=document.createElement("div")).classList.add("mines-num-div"),c.appendChild(y),(k=document.createElement("input")).classList.add("mines-num"),k.type="number",y.appendChild(k),k.value=10,(l=document.createElement("div")).classList.add("game-field"),o.appendChild(l),(L=document.createElement("button")).classList.add("flag-btn"),L.type="submit",l.appendChild(L),(C=document.createElement("div")).classList.add("flag-count"),l.appendChild(C),(w=document.createElement("div")).classList.add("clicks-count"),l.appendChild(w),(E=document.createElement("div")).classList.add("cell-container"),l.appendChild(E),(d=document.createElement("div")).classList.add("statistics-div"),o.appendChild(d),(S=document.createElement("h3")).classList.add("stat-title"),d.appendChild(S),S.textContent="Statistics",(P=document.createElement("div")).classList.add("statistics"),d.appendChild(P),(A=document.createElement("div")).classList.add("statistics","saved-stat"),d.appendChild(A),(M=document.createElement("div")).classList.add("history-date"),A.appendChild(M),(N=document.createElement("h4")).classList.add("hist-title","date-hist-title"),N.textContent="date",P.appendChild(N),(q=document.createElement("div")).classList.add("history-num"),A.appendChild(q),(T=document.createElement("h4")).classList.add("hist-title"),T.textContent="bombs",P.appendChild(T),(z=document.createElement("div")).classList.add("history-time"),A.appendChild(z),(R=document.createElement("h4")).classList.add("hist-title"),R.textContent="time",P.appendChild(R),(O=document.createElement("div")).classList.add("history-clicks"),A.appendChild(O),(I=document.createElement("h4")).classList.add("hist-title"),I.textContent="clicks",P.appendChild(I),document.body.appendChild(e),console.log("layout generated")}(),localStorage.getItem("stat")&&(document.querySelector(".saved-stat").innerHTML=localStorage.getItem("stat"));var be=document.querySelector(".theme-btn"),ve=document.querySelector(".flag-btn"),xe=document.querySelector(".choose-size"),ye=document.querySelector(".new-game-btn"),ke=document.querySelector(".mines-num"),Le=document.querySelector(".popup-background"),Ce=document.querySelector(".popup-title"),we=document.querySelector(".popup-text"),Ee=document.querySelector(".history-date"),Se=document.querySelector(".history-time"),Ae=document.querySelector(".history-clicks"),qe=document.querySelector(".history-num"),Me=document.querySelector(".sound-btn");function ze(e,n){var t=document.querySelector(".clicks-count");0!==fe.clicksNum||e.currentTarget.classList.contains("cell-flag")?e.currentTarget.classList.contains("cell-flag")||(fe.clicksNum+=1):(console.log("START"),fe.clicksNum+=1,fe.timer.timeOn=!0,de(fe.timer.timeOn),fe.minesArr=function(e,n,t){for(var a=[],r=1;r<=e;r++)!function e(){var r,o=(r=n*n-1,Math.floor(Math.random()*(r-0+1)+0));a.includes(o)||o===t?e():a.push(o)}();return a}(fe.minesCount,+fe.difficulty,n),function(e){for(var n=+e.difficulty,t=0;t<e.minesArr.length;t+=1){var a=e.minesArr[t]%n,r=(e.minesArr[t]-a)/n;e.matrix[r].splice(a,1,"b"),le(e.matrix,a,r)}}(fe)),t.textContent="Cell clicks: ".concat(fe.clicksNum)}function Oe(){var e=null;fe.cells.forEach((function(n){n.addEventListener("click",(function(t){if(e=fe.cellsArr.indexOf(n),fe.flagMode)he("flag",fe.soundOn),ce(t,0,fe.minesCount);else{ze(t,e);var a=ie(t,e,fe.matrix,fe.cellsArr),r=document.querySelectorAll(".cell-open").length;"gameover"===a?(he("lose",fe.soundOn),Le.classList.toggle("hidden"),Ce.textContent="GAME OVER!",we.textContent="Try again!",document.body.style.overflow="hidden",Le.classList.add("gameover"),Le.classList.remove("win")):r===Math.pow(+fe.difficulty,2)-fe.minesCount?function(){he("win",fe.soundOn),fe.timer.timeOn=!1;var e=de(fe.timer.timeOn);Le.classList.toggle("hidden"),Ce.textContent="Hooray!",we.textContent="You found all mines in ".concat(e," seconds and ").concat(fe.clicksNum," moves!"),document.body.style.overflow="hidden",Le.classList.add("win"),Le.classList.remove("gameover"),function(e){10===document.querySelectorAll(".result").length&&(Se.children[Se.children.length-1].remove(),Ae.children[Ae.children.length-1].remove(),Ee.children[Ee.children.length-1].remove(),qe.children[qe.children.length-1].remove(),me=document.querySelector(".saved-stat").innerHTML,localStorage.setItem("stat",me));var n=document.createElement("div");n.classList.add("result","hist"),n.textContent=e,Se.prepend(n);var t=document.createElement("div");t.textContent=fe.clicksNum,t.classList.add("hist"),Ae.prepend(t);var a=document.createElement("div");a.textContent=(new Date).toLocaleDateString("en-Us",{month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"}),a.classList.add("date-hist-title"),Ee.prepend(a);var r=document.createElement("div");r.textContent=fe.minesCount,r.classList.add("hist"),qe.prepend(r)}(e)}():he("open",fe.soundOn)}})),n.addEventListener("contextmenu",(function(t){fe.flagMode||(e=fe.cellsArr.indexOf(n),he("flag",fe.soundOn),ce(t,0,fe.minesCount))}))}))}function Te(){fe.difficulty=xe.value,fe.minesCount=+ke.value,xe.classList.remove("changed"),ke.classList.remove("changed"),ae(fe),re(fe,+fe.difficulty),fe.clicksNum=0,fe.cells=document.querySelectorAll(".cell"),fe.cellsArr=Array.from(fe.cells),fe.timer.timeOn=!1,de(fe.timer.timeOn),Oe()}ae(fe),re(fe,+fe.difficulty),fe.cells=document.querySelectorAll(".cell"),fe.cellsArr=Array.from(fe.cells),document.addEventListener("contextmenu",(function(e){return e.preventDefault()})),Oe(),xe.addEventListener("change",(function(){ke.value=xe.value,xe.classList.add("changed"),ke.classList.add("changed")})),ye.addEventListener("click",(function(){Te()})),ke.addEventListener("change",(function(){ke.classList.add("changed")})),Le.addEventListener("click",(function(){Le.classList.toggle("hidden"),document.body.style.overflow="",Te()})),be.addEventListener("click",(function(){document.body.classList.toggle("dark-mode")})),ve.addEventListener("click",(function(){ve.classList.toggle("flag-active"),fe.flagMode=!fe.flagMode})),Me.addEventListener("click",(function(){fe.soundOn=!fe.soundOn,Me.classList.toggle("sound-on"),console.log(fe.soundOn)}))})()})();